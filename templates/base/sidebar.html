<div class="sidebar-sticky pt-3">
    <ul class="nav flex-column">
        <!-- Dashboard -->
        <li class="nav-item">
            <a class="nav-link {% if 'dashboard' in request.resolver_match.url_name %}active{% endif %}" 
               href="{% url 'accounts:dashboard' %}">
                <i class="fas fa-tachometer-alt"></i>
                Dashboard
            </a>
        </li>
        
        <!-- Profile -->
        <li class="nav-item">
            <a class="nav-link {% if request.resolver_match.url_name == 'profile' %}active{% endif %}" 
               href="{% url 'accounts:profile' %}">
                <i class="fas fa-user"></i>
                My Profile
            </a>
        </li>
        
        <!-- Membership -->
        <li class="nav-item">
            <a class="nav-link {% if 'membership' in request.resolver_match.url_name %}active{% endif %}" 
               href="{% url 'governance:membership_application_create' %}">
                <i class="fas fa-id-card"></i>
                Membership
            </a>
        </li>
        
        <!-- Events -->
        <li class="nav-item">
            <a class="nav-link {% if 'event' in request.resolver_match.url_name %}active{% endif %}" 
               href="{% url 'events:event_list' %}">
                <i class="fas fa-calendar-alt"></i>
                Events
                {% if upcoming_events_count %}
                <span class="badge bg-primary rounded-pill float-end">{{ upcoming_events_count }}</span>
                {% endif %}
            </a>
        </li>
        
        <!-- My Trees -->
        <li class="nav-item">
            <a class="nav-link {% if 'tree' in request.resolver_match.url_name %}active{% endif %}" 
               href="/api/programs/tree-plantings/my_trees/">
                <i class="fas fa-tree"></i>
                My Trees
            </a>
        </li>
        
        <!-- Resources -->
        <li class="nav-item">
            <a class="nav-link {% if 'document' in request.resolver_match.url_name %}active{% endif %}" 
               href="{% url 'documents:document_list' %}">
                <i class="fas fa-file-alt"></i>
                Resources
            </a>
        </li>
        
        <!-- Divider for Executive/Admin Features -->
        {% if user.user_type == 'executive' or user.is_staff %}
        <li class="nav-item mt-3">
            <small class="text-muted px-3">ADMINISTRATION</small>
        </li>
        
        <!-- Program Management -->
        {% if perms.programs.add_program %}
        <li class="nav-item">
            <a class="nav-link {% if 'program' in request.resolver_match.url_name %}active{% endif %}" 
               href="{% url 'programs:program_list' %}">
                <i class="fas fa-project-diagram"></i>
                Programs
            </a>
        </li>
        {% endif %}
        
        <!-- Financial Management -->
        {% if perms.finance.view_income %}
        <li class="nav-item">
            <a class="nav-link {% if 'finance' in request.resolver_match.url_name %}active{% endif %}" 
               href="{% url 'finance:transaction_list' %}">
                <i class="fas fa-money-bill-wave"></i>
                Finance
            </a>
        </li>
        {% endif %}
        
        <!-- Governance -->
        {% if perms.governance.view_generalassembly %}
        <li class="nav-item">
            <a class="nav-link {% if 'governance' in request.resolver_match.url_name %}active{% endif %}" 
               href="/api/governance/assemblies/">
                <i class="fas fa-landmark"></i>
                Governance
            </a>
        </li>
        {% endif %}
        
        <!-- User Management -->
        {% if perms.accounts.view_customuser %}
        <li class="nav-item">
            <a class="nav-link {% if 'user' in request.resolver_match.url_name %}active{% endif %}" 
               href="/api/accounts/users/">
                <i class="fas fa-users-cog"></i>
                User Management
            </a>
        </li>
        {% endif %}
        
        <!-- Reports -->
        {% if perms.finance.view_report %}
        <li class="nav-item">
            <a class="nav-link {% if 'report' in request.resolver_match.url_name %}active{% endif %}" 
               href="/api/finance/financial-report/">
                <i class="fas fa-chart-bar"></i>
                Reports
            </a>
        </li>
        {% endif %}
        {% endif %}
        
        <!-- Settings -->
        <li class="nav-item mt-3">
            <a class="nav-link disabled" 
               href="#">
                <i class="fas fa-cog"></i>
                Settings
            </a>
        </li>
        
        <!-- Help & Support -->
        <li class="nav-item">
            <a class="nav-link disabled" 
               href="#">
                <i class="fas fa-question-circle"></i>
                Help & Support
            </a>
        </li>
    </ul>
</div>